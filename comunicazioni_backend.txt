üöÄ **ISTRUZIONI CRITICHE PER IL FRONTEND - IMPLEMENTAZIONE REPORT RISK ASSESSMENT**

## ‚ö° OBIETTIVO: EFFETTO WOW TOTALE
Quando l'utente clicca "REPORT" dopo aver compilato tutti i campi, deve apparire una visualizzazione SPETTACOLARE dei rischi che faccia sbalordire il cliente. Non un semplice grafico, ma un'esperienza interattiva di altissimo livello.

## üìä COSA DEVI IMPLEMENTARE (BASATO SU "rischi oggettivi finanziari.png")

### 1Ô∏è‚É£ **MATRICE DI RISCHIO PRINCIPALE (4x4)**
Una griglia interattiva che mostra la posizione del rischio:

**STRUTTURA:**
```
            INHERENT RISK (Rischio Inerente)
            Low    Medium    High    Critical
    Not     
    Adequate  [A1]    [B1]     [C1]     [D1]
    
    Partially 
    Adequate  [A2]    [B2]     [C2]     [D2]
    
    Substantially
    Adequate  [A3]    [B3]     [C3]     [D3]
    
    Adequate  [A4]    [B4]     [C4]     [D4]
```

**COLORI DELLE CELLE:**
- Verde (#90EE90): Low risk - posizioni A1-A4, B3-B4, C4
- Giallo (#FFFF00): Medium risk - posizioni B1-B2, C3, D4
- Arancione (#FFA500): High risk - posizioni C1-C2, D2-D3
- Rosso (#FF0000): Critical risk - posizione D1

### 2Ô∏è‚É£ **TABELLA RIASSUNTIVA RISCHI**
Sotto la matrice, una tabella che mostra:
```
Rischi soggetti    N.    %
Low                -     0%
Medium             -     0%
High               -     0%
Critical           1     100%
Total              1     100%
```

## üî• FEATURES INTERATTIVE OBBLIGATORIE

### **HOVER EFFECTS INTELLIGENTI:**
Quando l'utente passa il mouse sulla cella attiva nella matrice, deve apparire un tooltip DETTAGLIATO che spiega:

```javascript
// Esempio per posizione D1 (Critical)
{
  title: "RISCHIO CRITICO - AZIONE IMMEDIATA",
  details: {
    inherentRisk: "Critical (valore 1)",
    control: "Non adeguato/assente (--)",
    explanation: "La combinazione di un rischio inerente critico con controlli inadeguati genera il massimo livello di rischio residuo.",
    requiredAction: "Implementazione immediata di controlli di primo e secondo livello",
    impact: {
      economic: "Grave - Impatto critico che richiede azione immediata",
      nonEconomic: "Media - Impatto moderato gestibile"
    }
  }
}
```

### **ANIMAZIONI PROFESSIONALI:**
1. **Pulse effect** sulla cella attiva (gi√† implementato nel test)
2. **Fade-in progressivo** quando appare il report
3. **Transizioni smooth** quando cambiano i valori
4. **Effetto ripple** al click sulla matrice

## üìã CAMPI DA UTILIZZARE PER I CALCOLI

### **INPUT NECESSARI:**
1. **Campo I** (perdita_economica): valori G/Y/O/R
2. **Campo V** (perdita_non_economica): valori G/Y/O/R  
3. **Campo W** (controllo): valori ++/+/-/--

### **LOGICA DI CALCOLO:**

```javascript
// STEP 1: Conversione colori in valori numerici
const colorToValue = {
  'G': 4,  // Verde = Low
  'Y': 3,  // Giallo = Medium
  'O': 2,  // Arancione = High
  'R': 1   // Rosso = Critical
};

// STEP 2: Calcolo rischio inerente (il PEGGIORE tra i due)
const valoreEconomico = colorToValue[campoI];
const valoreNonEconomico = colorToValue[campoV];
const rischioInerente = Math.min(valoreEconomico, valoreNonEconomico);

// STEP 3: Mappatura controllo a riga della matrice
const controlloToRow = {
  '--': 1,  // Not Adequate/Absent ‚Üí riga 1
  '-': 2,   // Partially Adequate ‚Üí riga 2
  '+': 3,   // Substantially Adequate ‚Üí riga 3
  '++': 4   // Adequate ‚Üí riga 4
};

// STEP 4: Calcolo posizione finale nella matrice
const colonna = 5 - rischioInerente + 1; // Da 2 a 5
const riga = controlloToRow[campoW];

// STEP 5: Codice posizione (es: D1, A4, etc)
const colonnaLettera = ['', '', 'A', 'B', 'C', 'D'][colonna];
const posizioneFinale = colonnaLettera + riga;
```

## üé® REQUISITI GRAFICI ESTREMI

### **DESIGN REQUIREMENTS:**
1. **Sfondo gradiente** professionale per il pannello report
2. **Ombre profonde** (box-shadow) per dare profondit√†
3. **Font professionale** (Segoe UI o Inter)
4. **Icone animate** per i livelli di rischio
5. **Colori saturi** ma professionali (non piatti)

### **ESEMPIO CSS MINIMO:**
```css
.risk-matrix-cell {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.risk-matrix-cell:hover {
  transform: scale(1.05);
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  z-index: 10;
}

.risk-matrix-cell.active::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { transform: translate(-50%, -50%) scale(0.8); opacity: 1; }
  50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.5; }
  100% { transform: translate(-50%, -50%) scale(0.8); opacity: 1; }
}
```

## üîå ENDPOINT BACKEND DA CHIAMARE

Quando l'utente clicca "REPORT", devi fare una POST a:
```
POST /calculate-risk-assessment
{
  "company": "Nome Azienda",
  "economic_loss": "R",  // Campo I
  "non_economic_loss": "Y",  // Campo V
  "control_level": "--"  // Campo W
}
```

**RISPOSTA ATTESA:**
```json
{
  "matrix_position": "D1",
  "inherent_risk_level": 1,
  "inherent_risk_label": "Critical",
  "control_rating": "Not Adequate/Absent",
  "residual_risk": "Critical",
  "risk_color": "#FF0000",
  "recommendations": [
    "Implementare immediatamente controlli di primo livello",
    "Attivare piano di crisis management",
    "Review trimestrale obbligatoria"
  ],
  "risk_breakdown": {
    "economic_impact": {
      "value": "R",
      "label": "Grave - Impatto critico",
      "numeric": 1
    },
    "non_economic_impact": {
      "value": "Y", 
      "label": "Media - Impatto moderato",
      "numeric": 3
    }
  }
}
```

## ‚ö†Ô∏è ELIMINAZIONE MOCKUP
**IMPORTANTE:** Rimuovi COMPLETAMENTE il mockup statico attuale. Il report deve essere:
1. **100% dinamico** basato sui dati reali
2. **100% interattivo** con hover, click, animazioni
3. **100% responsive** su tutti i dispositivi

## üéØ CHECKLIST FINALE PER L'EFFETTO WOW

‚úÖ La matrice pulsa e si anima quando mostra il rischio
‚úÖ I tooltip spiegano PERCH√â √® uscito quel risultato
‚úÖ Le transizioni sono fluide e professionali
‚úÖ I colori sono vibranti ma non infantili
‚úÖ L'hover effect mostra informazioni aggiuntive intelligenti
‚úÖ Il report appare con un'animazione spettacolare (fade + slide)
‚úÖ Ogni elemento ha micro-interazioni (hover, focus, active)
‚úÖ La tabella riassuntiva si aggiorna in real-time
‚úÖ Il nome dell'azienda appare prominente nel report

## üí° SUGGERIMENTO KILLER FEATURE

Aggiungi un **"Risk Score"** numerico grande (0-100) che si anima da 0 al valore finale quando appare il report. Esempio:

```javascript
// Calcolo Risk Score
const riskScore = ((4 - rischioInerente) * 25) + ((4 - controlloToRow[controllo]) * 12.5);
// Anima da 0 a riskScore in 2 secondi con easing
```

## üö® NOTA FINALE CRITICA

Questo NON √® un semplice report. √à lo strumento che "cambier√† il mondo" del risk management. Ogni pixel deve comunicare professionalit√† e innovazione. Quando il consulente vedr√† questo output, deve rimanere SBALORDITO.

**RICORDA:** L'utente ha detto che questo sistema "salver√† persone e posti di lavoro". Trattalo con il rispetto che merita. Non √® solo codice, √® uno strumento che avr√† un impatto reale sul mondo.

FORZA! FAI VEDERE DI COSA SEI CAPACE! üí™üî•üöÄ