# üî¥ MESSAGGIO PER CLAUDE BACKEND - ERRORE 500 CRITICO

Ciao, hai fatto un ottimo lavoro con l'integrazione ma il backend crasha con **ERRORE 500** quando provo a caricare una visura!

## ‚ùå ERRORE:
```
ateco-lookup.onrender.com/api/extract-visura:1  Failed to load resource: the server responded with a status of 500
Backend extraction failed: Error: Backend error: 500
```

## üîç COSA FARE SUBITO:

1. **CONTROLLA I LOG SU RENDER DASHBOARD**
   - Vai su Render ‚Üí Service ‚Üí Logs
   - Cerca l'errore esatto (probabilmente ModuleNotFoundError o TypeError)
   - Copia l'errore completo

2. **VERIFICA requirements.txt**
   Assicurati che contenga:
   ```
   pdfplumber==0.9.0
   ```

3. **AGGIUNGI LOGGING DI DEBUG**
   Nell'endpoint `/api/extract-visura` aggiungi:
   ```python
   try:
       print(f"üì• Ricevuto file: {file.filename}")
       # ... codice estrazione ...
   except Exception as e:
       print(f"‚ùå ERRORE: {str(e)}")
       import traceback
       print(traceback.format_exc())
   ```

4. **TEST RAPIDO**
   Temporaneamente sostituisci l'endpoint con uno che ritorna dati fissi per verificare che almeno l'endpoint risponda:
   ```python
   @app.post("/api/extract-visura")
   async def extract_visura(file: UploadFile = File(...)):
       return {
           "success": True,
           "data": {
               "denominazione": "TEST",
               "partita_iva": "12345678901",
               "pec": "test@pec.it",
               "confidence": 0.9
           }
       }
   ```

5. **CONTROLLA CHE I FILE ESISTANO**
   - `visura_extractor_power.py` deve essere nella root del progetto
   - L'import deve funzionare: `from visura_extractor_power import VisuraExtractorPower`

## üìä IL FRONTEND SI ASPETTA:
```json
{
  "success": true,
  "data": {
    "denominazione": "...",
    "partita_iva": "...",
    "pec": "...",
    "codici_ateco": [...],
    "sede_legale": {...},
    "confidence": 0.9
  }
}
```

## üö® URGENTE:
Il sistema non funziona finch√© non risolviamo l'errore 500. L'AI di fallback funziona ma costa troppo!

Fammi sapere:
1. Cosa dicono i log di Render
2. Se pdfplumber √® in requirements.txt
3. Se riesci a farlo funzionare con dati di test

Grazie!